---
import ArtistPanel from "../components/ArtistPanel.astro";
import FestivalHeader from "../components/FestivalHeader.astro";
import ScheduleShell from "../components/ScheduleShell.astro";
import ScheduleToolbar from "../components/ScheduleToolbar.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import { getSitePayload } from "../lib/site-payload.js";
import appScript from "../scripts/app.js?url";
import "../styles/base.css";
import "../styles/timeline.css";

const {
  appShortName,
  appConfig,
  cssOverride,
  festivalDates,
  festivalName,
  footerDesktop,
  pageTitle,
  themeColor,
  touchHint,
} = getSitePayload(import.meta.env.PUBLIC_BUILD_ID);
---

<BaseLayout appShortName={appShortName} pageTitle={pageTitle} themeColor={themeColor}>
  <FestivalHeader festivalDates={festivalDates} festivalName={festivalName} />
  <ScheduleToolbar />
  <ScheduleShell footerDesktop={footerDesktop} touchHint={touchHint} />
  <ArtistPanel />

  <style is:inline set:html={cssOverride}></style>
  <script
    is:inline
    set:html={`window.__APP_CONFIG__ = ${JSON.stringify(appConfig)};`}
  ></script>
  <script type="module" src={appScript}></script>
</BaseLayout>
